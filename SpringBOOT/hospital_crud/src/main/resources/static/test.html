<!DOCTYPE html>
<html>
<body>

<h2>HOSPITAL SAMPLE</h2>

<h3>All Hospitals:</h3>
<div id="demo">
    <button type="button" onclick="setTimeout(getAll, 3000);">Get All</button><br><br>
</div>

<h3>Hospitals by Id:</h3>
<div id="id">
    <input type="text" id="hid">
    <button type="button" onclick="setTimeout(getId, 6000);">Get By Id</button><br><br>
</div>

<h3>Hospitals by Name:</h3>
<div id="name">
    <input type="text" id="hname">
    <button type="button" onclick="setTimeout(getName, 10000);">Get By Name</button>
</div>

<br><br><br>
<h2>NASA</h2>
<div id="nasa">
    <button type="button" onclick="getNasaPage()">Get Nasa Content</button><br><br>
</div>

<script>
function getAll() {
    const xmlhttp = new XMLHttpRequest();
    xmlhttp.onload = function() {
      const myObj = JSON.parse(this.responseText);
      let text = "<table border='3'>"
      text+="<tr><th>"+ "H_Id" + "</th><th>" + "Hospital Name" + "</th><th>" + "Location" + "</th><th>" + "Patient Name" + "</th><th>" + "Age" + "</th>";
      for (let x in myObj) {
         text += "<tr><td>" + myObj[x].hid +"</td><td>"+ myObj[x].hname +"</td><td>" + myObj[x].location + "</td><td>"+ myObj[x].patients.pname +"</td><td>"+ myObj[x].patients.age+"</td></tr>";
      }
      text += "</table>"
      document.getElementById("demo").innerHTML = text;
    }
    xmlhttp.open("GET", "http://localhost:8080/api/hospital");
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send();
}

function getId() {
    var id=document.getElementById("hid").value;
    const xmlhttp = new XMLHttpRequest();
    xmlhttp.onload = function() {
      const myObj = JSON.parse(this.responseText);
      let text = "<table border='1'>"
      text+="<tr><th>"+ "H_Id" + "</th><th>" + "Hospital Name" + "</th><th>" + "Location" + "</th><th>" + "Patient Name" + "</th>";
      for (let x in myObj) {
        text += "<tr><td>" + myObj[x].hid +"</td><td>"+ myObj[x].hname +"</td><td>" + myObj[x].location + "</td><td>"+ myObj[x].patients.pname +"</td></tr>";
      }
      text += "</table>"
      document.getElementById("id").innerHTML = text;
    }
    xmlhttp.open("GET", "http://localhost:8080/api/hospital/id/"+id);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send();
}

function getName() {
    var name=document.getElementById("hname").value;
    const xmlhttp = new XMLHttpRequest();
    xmlhttp.onload = function() {
      const myObj = JSON.parse(this.responseText);
      let text = "<table border='1'>"
      text+="<tr><th>"+ "H_Id" + "</th><th>" + "Hospital Name" + "</th><th>" + "Location" + "</th><th>" + "Patient Name" + "</th>";
      for (let x in myObj) {
        text += "<tr><td>" + myObj[x].hid +"</td><td>"+ myObj[x].hname +"</td><td>" + myObj[x].location + "</td><td>"+ myObj[x].patients.pname +"</td></tr>";
      }
      text += "</table>"
      document.getElementById("name").innerHTML = text;
    }
    xmlhttp.open("GET", "http://localhost:8080/api/hospital/name/"+name);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send();
}

function getNasaPage() {
  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    document.getElementById("nasa").innerHTML = this.responseText;
  }
  xhttp.open("GET", "https://api.nasa.gov/planetary/apod?api_key=gNXthHIrQL4lORIfdkPBdhWFh47bA0Lps9Lie0fe");
  xhttp.send();
}
</script>

</body>
</html>